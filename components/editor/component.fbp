% ---
% Creation
% Rect (main box)
ui_in => input create(editor/component/create) rect -> ui_in rect(ui/canvas/rectangle) ui_out => ui_out
rect() actions_out => actions_in awOut(ui/actionsWrapper) actions_out => actions_out
actions_in => actions_in aw(ui/actionsWrapper) actions_out -> actions_in awOut()
awOut() action => action
% Ports panels
create() inPorts -> ui_in inPortsPanel(editor/component/portPanel) widget_out => ui_out
create() outPorts -> ui_in outPortsPanel(editor/component/portPanel) widget_out => ui_out
inPortsPanel() actions_out -> actions_in awOut()
outPortsPanel() actions_out -> actions_in awOut()
% name
create() name -> ui_in name(editor/labelentry) ui_out -> place#1 td(ui/td) ui_out -> window winCanvas(ui/canvas/window) ui_out => ui_out
name() actions_out -> actions_in awOut()
create() pos -> ui_in winCanvas()
"start" -> ui_in td()
% Reload button
"start(text:"select")" -> ui_in selectButton(ui/button) ui_out -> place#2 td()
selectButton() actions_out -> actions_in awOut()

% ---
% Dummy add of ports, for the example!
"add("ui_in")" -> actions_in inPortsPanel()
"add("actions_in")" -> actions_in inPortsPanel()
"add("ui_out")" -> actions_in outPortsPanel()
"add("actions_out")" -> actions_in outPortsPanel()
"add("action")" -> actions_in outPortsPanel()

% ---
% Drag&Drop
rect() action#ButtonPress -> input dnd(dnd/dndLogic) move -> actions_in rect()
rect() action#ButtonRelease -> input dnd()
rect() action#Motion -> input dnd()

dnd() move -> actions_in inPortsPanel()
dnd() move -> actions_in outPortsPanel()
dnd() move -> actions_in winCanvas()

% ---
% The "real" component
% The manager
create() comp -> input compManager(editor/component/compManager)

% At link creation, add the Comp entry point to the record
outPortsPanel() action#beginLink -> input compManager() output -> actions_in awOut()
outPortsPanel() action#endLink -> input compManager()
inPortsPanel() action#beginLink -> input compManager()
inPortsPanel() action#endLink -> input compManager()

% ---
% select a new type of comp
selectButton() action#button_clicked -> input newComp(editor/component/compLoad) output -> type genComp(graph/generator) output -> input compManager()
compManager() newInPort -> actions_in inPortsPanel()
compManager() newOutPort -> actions_in outPortsPanel()